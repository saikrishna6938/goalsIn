"use strict";(self.webpackChunkmatx_react=self.webpackChunkmatx_react||[]).push([[7509],{7509:function(e,t,n){n.r(t),n.d(t,{default:function(){return _}});var i=n(61819),r=n(1413),o=n(45987),a=n(15861),s=n(29439),l=n(697),c=n(20890),d=n(5289),u=n(13400),h=n(65661),f=n(39157),y=n(97123),p=n(21524),x=n(87045),m=n(93268),g=n(53673),v=n(74153),Z=n(72791),b=n(26727),k=n(92271),C=n(18740),j=n(80184),R=function(e){var t=e.entity,n=e.reloadEntities,o=e.roleData,s=t||{entityName:"",entityLocation:"",entityPhone:"",entityDescription:"",userRoleNameId:0,RefCode:""},c=[{name:"entityName",label:"Entity Name",type:"string"},{name:"entityLocation",label:"Location",type:"string"},{name:"entityPhone",label:"Phone",type:"string"},{name:"entityDescription",label:"Description",type:"string"},{name:"userRoleNameId",label:"User Role Name",type:"combinedDropdown",selections:o?o.filter((function(e){return 5===e.roleTypeId})).map((function(e){return{id:e.roleNameId,name:e.roleName}})):[]},{name:"RefCode",label:"Reference Code",type:"string",disabled:!0}],d=b.Ry({entityName:b.Z_().required("Entity name is required"),entityLocation:b.Z_().required("Location is required"),entityPhone:b.Z_().matches(/^[0-9]+$/,"Phone must be only digits").required("Phone is required"),entityDescription:b.Z_().required("Description is required"),userRoleNameId:b.Rx().required("User Role Name ID is required"),RefCode:b.Z_().required("Reference Code is required")}),u=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t){var o,a,l;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=t.id?"update-entity/".concat(t.id):"add-entity",a=t.id?(0,r.Z)((0,r.Z)((0,r.Z)((0,r.Z)((0,r.Z)((0,r.Z)({},t.entityName!==s.entityName&&{entityName:t.entityName}),t.entityLocation!==s.entityLocation&&{entityLocation:t.entityLocation}),t.entityPhone!==s.entityPhone&&{entityPhone:t.entityPhone}),t.entityDescription!==s.entityDescription&&{entityDescription:t.entityDescription}),t.userRoleNameId!==s.userRoleNameId&&{userRoleNameId:t.userRoleNameId}),t.RefCode!==s.RefCode&&{RefCode:t.RefCode}):{entityName:t.entityName,entityLocation:t.entityLocation,entityPhone:t.entityPhone,entityDescription:t.entityDescription,userRoleNameId:t.userRoleNameId,RefCode:t.RefCode},e.prev=2,!t.id){e.next=9;break}return e.next=6,p.h.put(o,{body:a});case 6:e.t0=e.sent,e.next=12;break;case 9:return e.next=11,p.h.post(o,{body:a});case 11:e.t0=e.sent;case 12:(l=e.t0).success?(k.Z.showToast(l.message,"success"),n()):k.Z.showToast(l.message,"error"),e.next=20;break;case 16:e.prev=16,e.t1=e.catch(2),console.error("Error while adding/updating entity:",e.t1),k.Z.showToast("The details entered already exist. Please enter different details.","error");case 20:case"end":return e.stop()}}),e,null,[[2,16]])})));return function(t){return e.apply(this,arguments)}}();return(0,j.jsx)(l.Z,{display:"flex",flexDirection:"column",sx:{height:"100%",backgroundColor:"white",mt:"5px"},children:(0,j.jsx)(C.Z,{fields:c,initialValues:s,validationSchema:d,onSubmit:u,columns:2,showSaveButton:!0,readOnly:!1,showHeaderComponent:!1})})},w=n(58833),N=n(99490),D=n(29823),I=n(15671),P=n(43144),q=n(84098),S=new(function(){function e(){(0,I.Z)(this,e),this.roleData=[],(0,q.ky)(this,{roleData:!0,setRoleData:q.aD})}return(0,P.Z)(e,[{key:"setRoleData",value:function(e){this.roleData=e}},{key:"getRoleData",value:function(){return this.roleData}}]),e}()),T=["entityId"],L=["entityId"],E=[{id:"id",label:"Id",type:"number"},{id:"entityName",label:"Name",type:"string"},{id:"entityDescription",label:"Description",type:"string"},{id:"entityLocation",label:"Location",type:"string"},{id:"entityPhone",label:"Phone",type:"number"},{id:"roleName",label:"Role Name",type:"string"}],_=function(){var e=(0,Z.useState)(0),t=(0,s.Z)(e,2),n=t[0],b=t[1],C=(0,Z.useState)([]),I=(0,s.Z)(C,2),P=I[0],q=I[1],_=(0,Z.useState)({}),F=(0,s.Z)(_,2),B=F[0],O=F[1],U=(0,Z.useState)(!1),z=(0,s.Z)(U,2),H=z[0],W=z[1],A=(0,Z.useState)(!1),G=(0,s.Z)(A,2),V=G[0],$=G[1],J=(0,Z.useState)(null),K=(0,s.Z)(J,2),M=K[0],Q=K[1];(0,Z.useEffect)((function(){var e=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(){var t,n,a,s;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,(t=S.getRoleData())&&0!==t.length){e.next=8;break}return e.next=5,p.h.get("administrator/roles/names/get");case 5:n=e.sent,t=n.data,S.setRoleData(t);case 8:return Q(t),e.next=11,p.h.get("entities");case 11:a=e.sent,s=a.entities.map((function(e){var n=e.entityId,i=(0,o.Z)(e,T),a=t.find((function(e){return e.roleNameId===i.userRoleNameId}));return(0,r.Z)((0,r.Z)({id:n},i),{},{roleName:a?a.roleName:""})})),q(s),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),console.error("Error fetching data:",e.t0);case 19:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(){return e.apply(this,arguments)}}();e()}),[]);var X=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(){var t,n,a,s;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=null===B||void 0===B?void 0:B.id,e.next=4,p.h.get("entities");case 4:n=e.sent,a=n.entities.map((function(e){var t=e.entityId,n=(0,o.Z)(e,L),i=M.find((function(e){return e.roleNameId===n.userRoleNameId}));return(0,r.Z)((0,r.Z)({id:t},n),{},{roleName:i?i.roleName:""})})),q(a),a.length>0&&(s=a.find((function(e){return e.id===t})),O(s||a[0])),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error("Failed to reload entities:",e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();(0,Z.useEffect)((function(){if(P.length>0&&(null===B||void 0===B||!B.id)){var e=P[0];O(e)}}),[P]);var Y,ee=function(){$(!0)},te=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(){var t;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return $(!1),e.prev=1,e.next=4,p.h.delete("delete-entity/".concat(B.id));case 4:(t=e.sent).success?(k.Z.showToast(t.message,"success"),X()):k.Z.showToast(t.message,"error"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.error("Failed to reload entities:",e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}(),ne=function(){$(!1)};return(0,j.jsxs)("div",{style:{backgroundColor:"#ffffff",height:"calc(100vh - 95px)",maxHeight:"100%",display:"flex",justifyContent:"center",alignItems:"center",width:"100%"},children:[(0,j.jsx)(l.Z,{sx:{width:"100%",borderRadius:"4px",height:"100%"},children:(0,j.jsx)(l.Z,{sx:{height:"100%",display:"flex",justifyContent:"center",alignItems:"center",borderBottom:"1px solid #ccc"},children:(0,j.jsx)(g.P,{left:(0,j.jsxs)("div",{style:{paddingRight:"5px",height:"100%",display:"flex",flexDirection:"column"},children:[(0,j.jsx)(x._u,{style:{height:"60px"},children:(0,j.jsx)(x.vD,{children:(0,j.jsx)(c.Z,{variant:"overline",sx:{fontSize:15,ml:"16px"},children:"STRUCTURES"})})}),(0,j.jsx)(l.Z,{sx:{flex:1,overflow:"hidden"},children:(0,j.jsx)(m.Z,{tasks:P,columns:E,onSelection:function(e){if(null!==e){var t=P.find((function(t){return t.id===e}));O(t)}else W(!1)},resetSelectionRowId:H,defaultHeight:"100%",filterComponent:(0,j.jsx)(w.Z,{categories:["Create Entity","Delete Entity"],onButtonClick:function(e){switch(e){case"Create Entity":O({}),W(!0);break;case"Delete Entity":ee();break;default:console.log("Invalid Option")}}})})})]}),right:(0,j.jsxs)("div",{style:{marginRight:"5px",height:"100%",display:"flex",flexDirection:"column",marginLeft:"4px"},children:[(0,j.jsx)(v.Z,{value:n,onChange:function(e,t){b(t)},tabs:["Properties"]}),(0,j.jsx)(l.Z,{sx:{height:"100%",overflow:"hidden"},children:(Y=n,0===Y?(0,j.jsx)(R,{entity:B,reloadEntities:X,roleData:M}):null)})]})})})}),(0,j.jsx)(j.Fragment,{children:(0,j.jsx)(l.Z,{children:(0,j.jsxs)(d.Z,{open:V,onClose:ne,maxWidth:"xs",fullWidth:!0,children:[(0,j.jsx)(u.Z,{onClick:ne,sx:{position:"absolute",top:8,right:8,color:"grey.500",cursor:"pointer"},children:(0,j.jsx)(D.Z,{})}),B&&Object.keys(B).length>0?(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(h.Z,{children:"Confirm"}),(0,j.jsx)(f.Z,{children:(0,j.jsxs)(c.Z,{children:["Are you sure want to delete the entity",(0,j.jsx)("strong",{style:{marginLeft:"7px"},children:(null===B||void 0===B?void 0:B.entityName)||""})]})}),(0,j.jsxs)(y.Z,{children:[(0,j.jsx)(N.Z,{label:"Delete",btnType:"error",type:"button",onClick:te}),(0,j.jsx)(N.Z,{label:"Cancel",btnType:"default",type:"button",onClick:ne})]})]}):(0,j.jsx)(j.Fragment,{children:(0,j.jsx)(f.Z,{children:(0,j.jsx)(c.Z,{children:"Please select the entity"})})})]})})})]})}},99490:function(e,t,n){var i=n(1413),r=n(45987),o=(n(72791),n(94294)),a=n(91203),s=n(80184),l=["label","btnType","onClick","type"],c={success:{background:"#4CAF50",color:"white"},error:{background:"#F44336",color:"white"},warning:{background:"#FFC107",color:"black"},info:{background:"#ffa726",color:"white"},default:{background:"#2196F3",color:"white"}},d=(0,a.Z)(o.Z)((function(e){var t,n,i,r,o=e.btnType;return{backgroundColor:(null===(t=c[o])||void 0===t?void 0:t.background)||c.default.background,color:(null===(n=c[o])||void 0===n?void 0:n.color)||c.default.color,borderRadius:"6px",textTransform:"none",fontSize:"0.9rem",height:"2.2em",width:"auto","&:hover":{opacity:.8,backgroundColor:(null===(i=c[o])||void 0===i?void 0:i.background)||c.default.background,color:(null===(r=c[o])||void 0===r?void 0:r.color)||c.default.color}}}));t.Z=function(e){var t=e.label,n=e.btnType,o=void 0===n?"default":n,a=e.onClick,c=e.type,u=void 0===c?"button":c,h=(0,r.Z)(e,l);return(0,s.jsx)(d,(0,i.Z)((0,i.Z)({btnType:o,onClick:a,type:u},h),{},{children:t}))}},58833:function(e,t,n){n(72791);var i=n(94294),r=n(96873),o=n(80184);t.Z=function(e){var t=e.categories,n=e.onButtonClick;return(0,o.jsx)("div",{style:{display:"flex",width:"100%",justifyContent:"flex-end"},children:(0,o.jsx)("div",{style:{display:"inline-flex",gap:"5px",marginRight:"5px"},children:t.map((function(e){return(0,o.jsx)(i.Z,{variant:"outlined",sx:{flexGrow:1,minWidth:"auto",height:"2.2em",color:r.q.Button2,backgroundColor:r.q.Button_bg3,"&:hover":{backgroundImage:r.q.B_hv3,borderColor:r.q.Button2,backgroundColor:r.q.Button_bg3},textOverflow:"ellipsis",whiteSpace:"nowrap",fontSize:"0.9em",padding:"8px"},onClick:function(){!function(e){n(e)}(e)},children:e},e)}))})})}}}]);
//# sourceMappingURL=7509.80524a0a.chunk.js.map