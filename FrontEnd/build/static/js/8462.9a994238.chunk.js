"use strict";(self.webpackChunkmatx_react=self.webpackChunkmatx_react||[]).push([[8462],{86730:function(e,t,n){n(72791);var r=n(697),s=n(80184);t.Z=function(e){var t=e.Icon,n=e.Message,o=e.defaultHeight,i=void 0===o?"78.4vh":o;return(0,s.jsx)(r.Z,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:i,textAlign:"center"},children:(0,s.jsxs)(r.Z,{display:"flex",alignItems:"center",children:[t&&(0,s.jsx)(t,{sx:{fontSize:40,color:"#cfcfcf"}}),(0,s.jsx)("h1",{style:{fontSize:30,margin:0,color:"#cfcfcf",position:"relative",top:5,fontWeight:"450"},children:n})]})})}},52997:function(e,t,n){var r=n(1413),s=n(72791),o=n(7802),i=n(94070),a=n(55931),c=n(80184),l=s.forwardRef((function(e,t){return(0,c.jsx)(i.Z,(0,r.Z)({elevation:6,ref:t,variant:"filled"},e))}));function d(e){return(0,c.jsx)(a.Z,(0,r.Z)((0,r.Z)({},e),{},{direction:"left"}))}t.Z=function(e){var t=e.open,n=e.onClose,r=e.message,s=e.severity,i=void 0===s?"success":s,a=e.autoHideDurationDefault,u=void 0===a?6e3:a;return(0,c.jsx)(o.Z,{open:t,anchorOrigin:{vertical:"top",horizontal:"right"},autoHideDuration:u,onClose:n,TransitionComponent:d,children:(0,c.jsx)(l,{onClose:n,severity:i,children:r})})}},48462:function(e,t,n){n.r(t),n.d(t,{default:function(){return Re}});var r=n(1413),s=n(61819),o=n(15861),i=n(93433),a=n(29439),c=n(72791),l=n(66934),d=n(697),u=n(13967),x=n(20890),h=n(94294),f=n(55931),p=n(35527),m=n(73974),g=n(90493),Z=n(84852),j=n(20068),v=n(13901),y=n(16361),b=n(88326),k=n(31981),w=n(93006),I=n(36314),S=n(13400),C=n(38289),N=n(85523),D=n(61419),T=n(20653),R=n(93044),F=n(49900),B=n(21524),P=n(41561),W=n(82990),A=n(38940),q=n(92271),U=n(25584),z=n(96873),L=n(99023),O=n(15671),_=n(43144),H=n(84098),E=new(function(){function e(){(0,O.Z)(this,e),this.actions=[],this.documentState=null,(0,H.ky)(this)}return(0,_.Z)(e,[{key:"setActions",value:function(e){this.actions=e}},{key:"setDocumentState",value:function(e){this.documentState=e}}]),e}()),Y=n(50427),M=n(42249),G=n(80184),J=(0,l.ZP)(h.Z)((function(e){return{margin:e.theme.spacing(0,1),backgroundColor:"#ffffff",justifyContent:"space-between",color:"#000",fontWeight:600,fontFamily:z.R.poppins,marginRight:50,height:"55px",width:"95%","&:hover":{backgroundImage:z.q.B_hv3,backgroundColor:"#ffffff"}}})),K=(0,l.ZP)(d.Z)((function(e){e.theme;return{backgroundColor:"#efefef",borderRadius:"5px",padding:"15px",transition:"all 250ms ease-in-out"}})),V=(0,l.ZP)(w.Z)((function(e){e.theme;return{margin:"5px",width:"100%",fontFamily:z.R.inter}})),X=(0,l.ZP)(h.Z)((function(e){e.theme;return{width:"100%",margin:"5px",borderColor:z.q.Button1,backgroundColor:z.q.Button1,color:z.q.Button2,fontFamily:z.R.inter,"&:hover":{backgroundImage:z.q.B_hv1,borderColor:z.q.Button1,backgroundColor:z.q.Button1}}})),Q=(0,L.Pi)((function(e){var t=e.documentStateId,n=e.taskId,r=e.documentTypeId,i=e.currentUser,l=(e.userType,e.onActionComplete),u=e.assignedApprovers,h=(0,c.useState)([]),f=(0,a.Z)(h,2),p=f[0],m=f[1],j=(0,c.useState)("Actions State"),v=(0,a.Z)(j,2),y=v[0],b=v[1],k=(0,c.useState)(!1),w=(0,a.Z)(k,2),L=(w[0],w[1]),O=(0,c.useState)([]),_=(0,a.Z)(O,2),H=_[0],Q=_[1],$=(0,c.useState)(),ee=(0,a.Z)($,2),te=ee[0],ne=ee[1],re=(0,c.useState)(null),se=(0,a.Z)(re,2),oe=se[0],ie=se[1],ae=(0,c.useState)(""),ce=(0,a.Z)(ae,2),le=ce[0],de=ce[1],ue=(0,c.useState)(!1),xe=(0,a.Z)(ue,2),he=(xe[0],xe[1],q.Z.loginResponse.user[0].userId),fe=u.some((function(e){return e.userId===he}));(0,c.useEffect)((function(){fe&&me()}),[t,n,r]);var pe=0===((null===H||void 0===H?void 0:H.length)||0)?""===le.trim():null===oe,me=function(){B.h.post("task-actions",{body:{taskId:n,userId:i,userRoles:q.Z.loginResponse.user[0].roles}}).then((function(e){m(e.data),E.setActions(e.data)})).catch((function(e){console.error("Error fetching action data:",e)})),B.h.post("get-document-state",{body:{documentStateId:t}}).then((function(e){e.status&&b(e.data)}))},ge=function(){var e=(0,o.Z)((0,s.Z)().mark((function e(t){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Q(t.options),L(!0),ne(t),ie(null),de("");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ze=function(){var e=(0,o.Z)((0,s.Z)().mark((function e(t){var r;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=null===H||void 0===H?void 0:H.find((function(e){return e.id===oe})).name,B.h.post("add-task-workflow-action",{body:{taskId:n,taskSelectedOption:null!==r&&void 0!==r?r:"",taskNote:le,taskUserId:i,taskActionId:t}}).then((function(e){e.status&&B.h.post("update-action",{body:{taskId:n,actionId:t,userId:i}}).then((function(e){e.status?window.location.reload():l(e.message,"error"),ne(null),de(""),ie(null)}))}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),je=function(){L(!1),Ze(te.actionId),de("")},ve=function(e){ie(parseInt(e.target.value,10))};return(0,G.jsxs)(d.Z,{sx:{height:"100%",maxWidth:"84%",backgroundColor:"#efefef"},children:[(0,G.jsx)(P.Z,{title:y}),(0,G.jsxs)("div",{style:{maxHeight:"calc(102vh - 150px)",overflowY:"auto",overflowX:"hidden"},children:[0==p.length&&(0,G.jsx)(G.Fragment,{children:(0,G.jsxs)(d.Z,{sx:{display:"flex",alignItems:"center",mt:5,ml:3},children:[(0,G.jsx)(U.Z,{sx:{color:"#cfcfcf",fontSize:35,mr:"5px",mt:"3px"}}),(0,G.jsx)(x.Z,{sx:{color:"#cfcfcf",mt:.5,mb:0,fontSize:21,fontWeight:450,fontFamily:z.R.poppins},children:"No actions available"})]})}),(0,G.jsxs)(I.Z,{spacing:2,direction:"column",mt:2,sx:{paddingBottom:"10px"},children:[p.map((function(e){return(0,G.jsxs)("div",{children:[(0,G.jsx)(J,{variant:"contained",endIcon:(0,G.jsx)(W.Z,{}),onClick:function(){return ge(e)},children:e.actionName}),(null===te||void 0===te?void 0:te.actionId)==e.actionId&&(0,G.jsxs)(K,{children:[(0,G.jsx)(d.Z,{display:"flex",justifyContent:"right",alignItems:"center",children:(0,G.jsx)(S.Z,{size:"small",sx:{textAlign:"right"},onClick:function(){ne(null),de(""),ie(null)},children:(0,G.jsx)(A.Z,{fontSize:"small"})})}),(0,G.jsx)(C.Z,{value:oe,onChange:ve,children:null===H||void 0===H?void 0:H.map((function(e){return(0,G.jsx)(N.Z,{value:e.id,control:(0,G.jsx)(D.Z,{}),label:e.name},e.id)}))}),(0,G.jsxs)(d.Z,{flexDirection:"column",width:"90%",children:[(0,G.jsx)(V,{label:"Note",multiline:!0,rows:4,variant:"outlined",value:le,onChange:function(e){return de(e.target.value)},onKeyDown:function(e){"Enter"===e.key&&(e.preventDefault(),de((function(e){return e+"\n"})))}}),(0,G.jsx)(X,{onClick:je,variant:"contained",color:"success",disabled:pe,children:"Submit"})]})]},"option-container")]},e.actionId)})),(0,G.jsx)(P.Z,{children:"Task Approvers"}),0===u.length?(0,G.jsx)(G.Fragment,{children:(0,G.jsx)(d.Z,{sx:{display:"flex",alignItems:"center",mt:8},children:(0,G.jsxs)(d.Z,{sx:{display:"flex",justifyContent:"center",ml:"22px",mt:1},children:[(0,G.jsx)(M.Z,{sx:{color:"#cfcfcf",fontSize:27,mr:"5px",mt:"2px"}}),(0,G.jsxs)(x.Z,{sx:{color:"#cfcfcf",mt:.5,mb:0,fontSize:16,fontWeight:450,fontFamily:z.R.poppins},children:["No Task Approvers available"," "]})]})})}):(0,G.jsx)(g.Z,{style:{overflowY:"auto",marginBottom:"25px"},children:u.map((function(e){return(0,G.jsx)(c.Fragment,{children:(0,G.jsxs)(Z.ZP,{style:{alignItems:"flex-start"},children:[(0,G.jsx)(T.Z,{children:(0,G.jsx)(R.Z,{sx:{backgroundColor:Y.Z[100],color:Y.Z[600]},children:e.userFirstName[0]+e.userLastName[0]})}),(0,G.jsx)(F.Z,{primary:"  ".concat(e.userName),secondary:"".concat(e.userFirstName," ").concat(e.userLastName," ")})]},e.userId)})}))})]})]})]})})),$=Q,ee=n(57689),te=n(23503),ne=n(57621),re=n(61889),se=n(99875),oe=function(e){var t=e.messages,n=e.onSendMessage,r=e.currentUser,s=(0,c.useState)(""),o=(0,a.Z)(s,2),i=o[0],l=o[1],u=(0,c.useRef)(null);(0,c.useEffect)((function(){!function(){var e;null===(e=u.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})}()}),[t]);var f=function(e){return e.reduce((function(e,t){var n=new Date(t.noteCreated).toLocaleDateString();return e[n]||(e[n]=[]),e[n].push(t),e}),{})}(t);return(0,G.jsxs)(p.Z,{elevation:3,style:{height:"100%",display:"flex",flexDirection:"column",marginRight:"40px",maxWidth:"84%",position:"relative",borderRadius:0,fontFamily:z.R.inter,backgroundColor:"#ffffff"},children:[(0,G.jsx)(P.Z,{title:"Notes"}),(0,G.jsxs)(g.Z,{style:{flex:1,overflowY:"scroll"},children:[Object.keys(f).map((function(e){return(0,G.jsxs)(c.Fragment,{children:[(0,G.jsx)(x.Z,{variant:"subtitle2",style:{padding:"10px",fontFamily:z.R.poppins,color:z.q.NP_text},children:e}),f[e].map((function(e){return(0,G.jsx)(Z.ZP,{children:(0,G.jsx)(d.Z,{sx:{width:"100%"},children:(0,G.jsxs)(ne.Z,{sx:{width:"100%",backgroundColor:e.noteUserId===r?z.q.NP_bg_user:z.q.NP_bg_other,border:"1px solid ".concat(z.q.NP_border),borderRadius:2,boxShadow:"0 1px 2px rgba(0,0,0,0.05)"},children:[(0,G.jsx)(T.Z,{children:(0,G.jsx)(R.Z,{sx:{mt:1,ml:1,width:22,height:22},children:e.userFirstName[0]})}),(0,G.jsx)(F.Z,{sx:{ml:1.5,mr:1,mt:2,mb:1.5,fontFamily:z.R.open_sans,color:z.q.NP_text},primary:e.noteComment.split("\n").map((function(e,t){return(0,G.jsxs)(c.Fragment,{children:[e,(0,G.jsx)("br",{})]},t)}))}),(0,G.jsx)(F.Z,{sx:{position:"absolute",top:14,left:50,width:"230px",fontFamily:z.R.inter},secondary:(0,G.jsxs)(d.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,G.jsx)(x.Z,{fontWeight:"600",fontFamily:z.R.poppins,sx:{color:z.q.NP_text},children:"".concat(e.userFirstName)}),(0,G.jsx)(x.Z,{fontWeight:"600",fontSize:"small",fontFamily:z.R.inter,sx:{color:z.q.NP_text},children:"".concat(new Date(e.noteCreated).toLocaleTimeString(void 0,{hour:"2-digit",minute:"2-digit",hour12:!0}))})]})})]})})},e.noteId)}))]},e)})),(0,G.jsx)("div",{ref:u})]}),(0,G.jsxs)(d.Z,{sx:{padding:"10px",borderTop:"1px solid ".concat(z.q.NP_border),marginTop:"auto"},children:[(0,G.jsx)(re.ZP,{item:!0,xs:12,sx:{mr:"8px"},children:(0,G.jsx)("textarea",{placeholder:"Add your Comment here...",style:{width:"100%",minHeight:"30px",padding:"8px",resize:"none",fontFamily:z.R.inter,fontSize:"14px",border:"1px solid ".concat(z.q.NP_border),borderRadius:4,outline:"none",color:z.q.NP_text},value:i,onChange:function(e){return l(e.target.value)},onKeyDown:function(e){"Enter"===e.key&&(e.preventDefault(),l((function(e){return e+"\n"})))}})}),(0,G.jsx)(d.Z,{sx:{width:"100%",mr:"15px",paddingX:"8px",padding:"8px 8px 0 8px"},children:(0,G.jsxs)(re.ZP,{container:!0,justifyContent:"space-between",alignItems:"center",children:[(0,G.jsx)(se.Z,{sx:{color:z.q.NP_text},children:"attachment"}),(0,G.jsx)(re.ZP,{item:!0,children:(0,G.jsx)(h.Z,{variant:"contained",onClick:function(){i.trim()&&(n(i.trim()),l(""))},sx:{borderColor:z.q.Button1,backgroundColor:z.q.Button1,color:z.q.Button2,fontFamily:z.R.poppins,"&:hover":{backgroundImage:z.q.B_hv1,borderColor:z.q.Button1,backgroundColor:z.q.Button1},height:"28px"},children:"Send"})})]})})]})]})},ie=n(94721),ae=function(e){var t=e.history,n={};return t.sort((function(e,t){return new Date(e.historyCreatedDate).getTime()-new Date(t.historyCreatedDate).getTime()})),t.forEach((function(e){var t=new Date(e.historyCreatedDate).toLocaleDateString();n[t]||(n[t]=[]),n[t].push(e)})),(0,G.jsxs)(p.Z,{elevation:3,style:{height:"100%",display:"flex",flexDirection:"column",maxWidth:"84%",borderRadius:0},children:[(0,G.jsx)(P.Z,{title:"Task History"}),(0,G.jsx)(g.Z,{style:{overflowY:"auto"},children:Object.entries(n).map((function(e,t){var n=(0,a.Z)(e,2),r=n[0],s=n[1];return(0,G.jsxs)(c.Fragment,{children:[(0,G.jsx)(Z.ZP,{children:(0,G.jsx)(x.Z,{sx:{fontSize:"1.1em"},children:r})}),(0,G.jsx)(ie.Z,{}),s.map((function(e){return(0,G.jsx)(Z.ZP,{children:(0,G.jsx)(F.Z,{primary:"".concat(e.userFirstName," ").concat(e.userLastName," at ").concat(new Date(e.historyCreatedDate).toLocaleTimeString("en-US",{hour:"numeric",minute:"numeric",hour12:!0})),secondary:e.historyTypeName})},e.historyId)}))]},t)}))})]})},ce=n(5985),le=n(52997),de=n(74153),ue=n(11900),xe=n(81278),he=n(5289),fe=n(65661),pe=n(9955),me=n(97123),ge=n(38820),Ze=n(633),je=function(e){var t=e.assignedUsers,n=e.unAssignedUsers,r=e.taskUsers,s=e.handleTaskUsers,o=r.split(",").map(Number),i=(0,c.useState)(!1),l=(0,a.Z)(i,2),u=l[0],f=l[1],p=(0,c.useState)(""),m=(0,a.Z)(p,2),j=m[0],v=m[1],y=(0,c.useState)(""),b=(0,a.Z)(y,2),k=b[0],C=b[1],N=(0,c.useState)(t),D=(0,a.Z)(N,2),B=D[0],W=D[1],A=(0,c.useState)(n),U=(0,a.Z)(A,2),z=U[0],L=U[1],O=(0,c.useState)(r),_=(0,a.Z)(O,2),H=_[0],E=_[1],Y=function(){return f(!1)};(0,c.useEffect)((function(){o=r.split(",").map(Number);var e=n.filter((function(e){return o.includes(+e.userId)})),t=n.filter((function(e){return!o.includes(+e.userId)}));W(e),L(t)}),[r]);var M=function(e){var t="".concat(e.userId),n=H.length>0?H.split(","):[];if(n.includes(t))E(n.filter((function(e){return e!==t})).join(","));else{var r=H.length>0?"".concat(H,",").concat(t):t;E(r)}};q.Z.loginResponse.user[0].userType;return(0,G.jsxs)("div",{style:{height:"100vh"},children:[(0,G.jsx)(P.Z,{title:"Assigned Users",children:(0,G.jsx)(S.Z,{style:{backgroundColor:"white",borderRadius:"10"},size:"small",onClick:function(){return f(!0)},children:(0,G.jsx)(ge.Z,{color:"primary"})})}),0==B.length&&(0,G.jsxs)(d.Z,{p:5,display:"flex",flexDirection:"column",sx:{backgroundColor:"white"},alignContent:"center",justifyContent:"center",children:[(0,G.jsx)(Ze.Z,{style:{display:"flex",alignSelf:"center",margin:"10px"}}),(0,G.jsx)(x.Z,{variant:"h6",color:"gray",style:{alignSelf:"center"},children:"No Users are Assigned."})]}),(0,G.jsx)(I.Z,{direction:"column",marginBottom:2,sx:{backgroundColor:"white",height:"100%"},children:B.map((function(e){return(0,G.jsxs)(Z.ZP,{sx:{height:"50px",borderBottom:"0.5px solid #dedede"},children:[(0,G.jsx)(T.Z,{children:(0,G.jsx)(R.Z,{sx:{width:"30px",height:"30px"}})}),(0,G.jsx)(F.Z,{primary:e.userFirstName})]},e.userId)}))}),(0,G.jsxs)(he.Z,{open:u,onClose:Y,fullWidth:!0,maxWidth:"md",style:{height:700},children:[(0,G.jsx)(fe.Z,{id:"simple-dialog-title",style:{backgroundColor:"#dedede"},children:(0,G.jsx)(x.Z,{variant:"inherit",align:"left",children:"Update assigned users"})}),(0,G.jsxs)(d.Z,{display:"flex",flexDirection:"row",justifyContent:"space-between",m:2,children:[(0,G.jsxs)(I.Z,{width:"50%",m:1,height:400,border:"1px solid #dedede",margin:1,padding:1,children:[(0,G.jsx)(x.Z,{variant:"overline",align:"left",children:"Assigned Users"}),(0,G.jsx)(w.Z,{label:"Filter assigned users",value:j,variant:"filled",fullWidth:!0,onChange:function(e){if(v(e.target.value),""!==e.target.value)W(B.filter((function(t){return t.userFirstName.toLowerCase().includes(e.target.value.toLowerCase())})));else{var t=n.filter((function(e){return o.includes(+e.userId)}));W(t)}}}),(0,G.jsx)(g.Z,{style:{overflowY:"scroll"},children:B.map((function(e){return(0,G.jsxs)(Z.ZP,{sx:{height:"50px",borderBottom:"0.5px solid #dedede"},children:[(0,G.jsx)(T.Z,{children:(0,G.jsx)(R.Z,{})}),(0,G.jsx)(F.Z,{primary:e.userFirstName}),(0,G.jsx)(pe.Z,{checked:H.includes("".concat(e.userId)),onChange:function(){return M(e)}})]},e.userId)}))})]}),(0,G.jsxs)(I.Z,{width:"50%",m:1,height:400,border:"1px solid #dedede",margin:1,padding:1,children:[(0,G.jsx)(x.Z,{variant:"overline",align:"left",children:"Unassigned Users"}),(0,G.jsx)(w.Z,{label:"Filter unassigned users",value:k,variant:"filled",fullWidth:!0,onChange:function(e){if(C(e.target.value),""!==e.target.value)L(z.filter((function(t){return t.userFirstName.toLowerCase().includes(e.target.value.toLowerCase())})));else{var t=n.filter((function(e){return!o.includes(+e.userId)}));L(t)}}}),(0,G.jsx)(g.Z,{style:{overflowY:"scroll"},children:z.map((function(e){return(0,G.jsxs)(Z.ZP,{sx:{height:"50px",borderBottom:"0.5px solid #dedede"},children:[(0,G.jsx)(T.Z,{children:(0,G.jsx)(R.Z,{})}),(0,G.jsx)(F.Z,{primary:e.userFirstName}),(0,G.jsx)(pe.Z,{checked:H.includes("".concat(e.userId)),onChange:function(){return M(e)}})]},e.userId)}))})]})]}),(0,G.jsxs)(me.Z,{style:{padding:"20px",backgroundColor:"#dedede"},children:[(0,G.jsx)(h.Z,{onClick:Y,variant:"outlined",color:"error",children:"Close"}),(0,G.jsx)(h.Z,{onClick:function(){s(H),Y()},variant:"outlined",children:"Save"})]})]})]})},ve=n(41753),ye=n(59110),be=n(69212),ke=n(86730),we=function(e){var t=e.taskId,n=e.reset,r=(0,c.useState)([]),s=(0,a.Z)(r,2),o=s[0],i=s[1],l=(0,u.Z)(),h=q.Z.loginResponse.user[0].userType;(0,c.useEffect)((function(){B.h.get("get-task-workflow/".concat(t)).then((function(e){e.status&&i(e.data)}))}),[t,n]);var f=o.sort((function(e,t){return new Date(t.taskWorkflowDate).getTime()-new Date(e.taskWorkflowDate).getTime()})).reduce((function(e,t){var n=new Date(t.taskWorkflowDate).toLocaleDateString();return e[n]=e[n]||[],e[n].push(t),e}),{});return(0,G.jsx)(p.Z,{sx:{borderRadius:0,display:"flex",flexDirection:"column",height:"100%"},children:0===Object.entries(f).length?(0,G.jsx)(d.Z,{children:(0,G.jsx)(ke.Z,{Icon:ye.Z,Message:"No History Found"})}):(0,G.jsx)(d.Z,{sx:{display:"flex",flex:1,overflowY:"auto"},children:(0,G.jsx)(g.Z,{sx:{width:"100%"},children:Object.entries(f).map((function(e){var t=(0,a.Z)(e,2),n=t[0],r=t[1];return(0,G.jsxs)(c.Fragment,{children:[(0,G.jsx)(d.Z,{sx:{borderTop:"1px solid #bdbdbd",borderBottom:"1px solid #bdbdbd",padding:"8px",mx:8,fontWeight:"bold",ml:10},children:n}),(0,G.jsx)(d.Z,{sx:{ml:4,mr:5,mt:3,mb:5},children:r.map((function(e,t){return(0,G.jsxs)(c.Fragment,{children:[(0,G.jsxs)(d.Z,{sx:{display:"flex",alignItems:"center",padding:"8px",marginTop:"10px"},children:[(0,G.jsx)(d.Z,{sx:{flexShrink:0,marginRight:2},children:(0,G.jsx)(R.Z,{sx:{backgroundColor:Y.Z[100],color:Y.Z[600],height:27,width:27,fontSize:14,ml:"5px"},children:e.userFirstName[0]+e.userLastName[0]})}),(0,G.jsx)(d.Z,{sx:{flex:1,display:"flex"},children:(0,G.jsx)(x.Z,{sx:{fontSize:17,fontWeight:450,ml:1.6},children:e.actionName})}),(0,G.jsx)(d.Z,{sx:{flexShrink:0,marginLeft:2,color:"#9e9e9e"},children:0===t||new Date(r[t-1].taskWorkflowDate).getMinutes()!==new Date(e.taskWorkflowDate).getMinutes()?(0,G.jsxs)(d.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,G.jsx)(be.Z,{sx:{fontSize:18,marginRight:"2px"}}),(0,G.jsx)(x.Z,{align:"right",sx:{fontSize:12,fontWeight:410,color:"#9e9e9e"},children:new Date(e.taskWorkflowDate).toLocaleTimeString("en-US",{hour:"numeric",minute:"numeric",hour12:!0})})]}):(0,G.jsx)(d.Z,{padding:"4px"})})]}),(e.taskSelectedOption||e.taskNote)&&(0,G.jsx)(d.Z,{sx:{ml:3},children:(0,G.jsx)(Z.ZP,{style:{borderLeft:"2px dashed #bdbdbd",paddingLeft:"20px",paddingTop:"0px"},children:(0,G.jsxs)(d.Z,{sx:{ml:3},children:[(0,G.jsxs)(x.Z,{sx:{marginBottom:"15px",fontSize:12,fontWeight:"bold"},children:["by :",(0,G.jsx)("span",{style:{fontWeight:550,marginLeft:"10px",color:l.palette.primary.main},children:"".concat(e.userFirstName," ").concat(e.userLastName," ")})]}),e.taskSelectedOption&&(0,G.jsxs)(x.Z,{sx:{marginBottom:"6px",fontWeight:550},children:["Option :",(0,G.jsx)("span",{style:{marginLeft:"10px",fontWeight:400},children:e.taskSelectedOption})]}),e.taskNote&&2!==h&&(0,G.jsx)(j.Z,{title:e.taskNote,children:(0,G.jsxs)(x.Z,{sx:{fontWeight:550},children:["Notes :",(0,G.jsx)("span",{style:{marginLeft:"10px",fontWeight:400},children:e.taskNote})]})})]})})})]},e.taskWorkflowId)}))})]},n)}))})})})},Ie=n(32263),Se=n(91964),Ce=(0,n(50225).Z)(h.Z)({height:"2.2em",border:"1px solid #616161",color:"#424242",padding:"0 10px","&:hover":{color:"black",border:"1px solid black"}}),Ne=function(e){var t=e.taskId,n=(0,ee.s0)();return(0,G.jsx)(p.Z,{sx:{height:"100%",width:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",textAlign:"left"},children:(0,G.jsxs)(d.Z,{sx:{textAlign:"left"},children:[(0,G.jsxs)(d.Z,{sx:{display:"flex",alignItems:"center",gap:"0.5em"},children:[(0,G.jsx)(Se.Z,{sx:{fontSize:"3.5vw",color:"#616161"}}),(0,G.jsx)(x.Z,{sx:{fontSize:"3.2vw",fontWeight:600,color:"#616161"},children:"Cannot access document"})]}),(0,G.jsxs)(x.Z,{sx:{fontSize:"1.15vw",fontWeight:500,color:"#757575",ml:"4.2vw",mt:"0.1em"},children:["Document ",t," does not exist or you do not have access to it."]}),(0,G.jsxs)(d.Z,{sx:{display:"flex",gap:"1.5em",justifyContent:"flex-end",mt:"2em"},children:[(0,G.jsx)(Ce,{onClick:function(){return n(-1)},children:"Go Back"}),(0,G.jsx)(Ce,{onClick:function(){return n("/dashboard/default")},children:"Go Home"})]})]})})},De=n(27564),Te=(0,l.ZP)(d.Z)((function(e){var t=e.theme;return{borderLeft:"1px solid ".concat(t.palette.divider),padding:t.spacing(2),overflowY:"auto",backgroundColor:"rgb(245, 247, 250)"}})),Re=function(){var e=(0,c.useState)("actions"),t=(0,a.Z)(e,2),n=t[0],l=t[1],w=(0,c.useState)(),I=(0,a.Z)(w,2),S=I[0],C=I[1],N=(0,c.useState)(0),D=(0,a.Z)(N,2),T=D[0],R=D[1],F=(0,u.Z)(),W=(0,ee.TH)().pathname,A=(0,c.useState)([]),U=(0,a.Z)(A,2),L=U[0],O=U[1],_=(0,c.useState)(),H=(0,a.Z)(_,2),E=H[0],Y=H[1],M=(0,ee.s0)(),J=W.split("/"),K=J[J.length-1],V=(0,c.useState)([]),X=(0,a.Z)(V,2),Q=X[0],ne=X[1],re=(0,c.useState)([]),se=(0,a.Z)(re,2),ie=se[0],he=se[1],fe=(0,c.useState)(!1),pe=(0,a.Z)(fe,2),me=pe[0],ge=pe[1],Ze=(0,c.useState)(""),ye=(0,a.Z)(Ze,2),be=ye[0],ke=ye[1],Se=(0,c.useState)(!1),Ce=(0,a.Z)(Se,2),Re=Ce[0],Fe=Ce[1],Be=(0,c.useState)([]),Pe=(0,a.Z)(Be,2),We=Pe[0],Ae=(Pe[1],q.Z.loginResponse.user[0].userId),qe=q.Z.loginResponse.user[0].userType,Ue=(0,c.useState)(!1),ze=(0,a.Z)(Ue,2),Le=ze[0],Oe=ze[1],_e=(0,c.useState)(null),He=(0,a.Z)(_e,2),Ee=(He[0],He[1]),Ye=(0,c.useState)(!1),Me=(0,a.Z)(Ye,2),Ge=Me[0],Je=Me[1];(0,c.useEffect)((function(){B.h.post("getobject",{body:{taskId:"".concat(J[J.length-1])}}).then((function(e){if(e.status&&e.data){var t=JSON.parse(e.data.documentTypeAnswersObject),n=e.data.documentTypeId;B.h.get("document-type/get-object/".concat(n)).then((function(e){if(e.status){var n=Ke(t);O(n)}}))}}))}),[J[J.length-1]]);var Ke=function(e){var t=[];return Object.entries(e).map((function(e){"object"==typeof e[1]&&(t=[].concat((0,i.Z)(t),(0,i.Z)(e[1])))})),t};(0,c.useEffect)((function(){null!==S&&void 0!==S&&S.documentTypeAnswersId&&B.h.post("get-application-id",{body:{documentTypeAnswersId:null===S||void 0===S?void 0:S.documentTypeAnswersId}}).then((function(e){if(e.status){(0,xe.updateInitialValues)(e.data.documentTypeObject.sections,JSON.parse(e.data.documentTypeAnswersObject));Ee(e.data.documentTypeObject),Y(e.data),tt()}}))}),[null===S||void 0===S?void 0:S.documentTypeAnswersId]);var Ve=(0,c.useState)({onClose:function(){},open:!1,message:"",severity:"info"}),Xe=(0,a.Z)(Ve,2),Qe=Xe[0],$e=Xe[1],et=function(e){l((function(t){return t===e?null:e}))},tt=function(){var e=(0,o.Z)((0,s.Z)().mark((function e(){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),nt=function(){var e=(0,o.Z)((0,s.Z)().mark((function e(){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B.h.get("task/notes/".concat(K)).then((function(e){he(e)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),rt=function(){var e=(0,o.Z)((0,s.Z)().mark((function e(t){var n;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Fe(!0),ge(!0),e.prev=2,e.next=5,B.h.post("get/filedata",{body:{uploadId:t.uploadId}});case 5:(n=e.sent)&&n.data&&n.data.fileData?ke(n.data.fileData):console.error("Invalid response or no file data received."),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.error("Error fetching file:",e.t0);case 12:return e.prev=12,Fe(!1),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[2,9,12,15]])})));return function(t){return e.apply(this,arguments)}}(),st=function(){var e=(0,o.Z)((0,s.Z)().mark((function e(t){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B.h.post("addNote",{body:(0,r.Z)({},t)}).then((function(e){nt()}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ot=function(){var e=(0,o.Z)((0,s.Z)().mark((function e(){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B.h.get("history/task/".concat(K)).then((function(e){e.status&&ne(e.data)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),it=function(){var e=(0,o.Z)((0,s.Z)().mark((function e(){var t,n;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Je(!1),e.prev=1,e.next=4,B.h.post("check-task-access",{body:{taskId:K,userId:q.Z.loginResponse.user[0].userId}});case 4:!0===(t=e.sent).status?(C(t.data),n=q.Z.loginResponse.user[0].userId,B.h.post("history/add",{body:{historyTypeId:2,historyUserId:n,historyTaskId:K}}).then((function(e){e.status}))):(Je(!0),C(null)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.error("Error fetching action data:",e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}();(0,c.useEffect)((function(){ot(),nt(),it()}),[W]);return Ge?(0,G.jsx)(Ne,{taskId:K}):S?(0,G.jsx)("div",{style:{height:"100%",maxHeight:"calc(100vh - 100px)",overflowY:"auto",width:"100%",borderRadius:0},children:(0,G.jsx)(G.Fragment,{children:(0,G.jsxs)(d.Z,{sx:{height:"100%",display:"flex",flexDirection:"column",borderRadius:"5px",borderBottom:"1px solid #ccc"},children:[(0,G.jsxs)(d.Z,{sx:{borderBottom:"1px solid #eeeeee",flexShrink:0,display:"flex",justifyContent:"space-between",alignItems:"center",boxSizing:"border-box",overflow:"hidden",padding:"3px",background:"linear-gradient(to top, #fafafa 0%, #eeeeee 100%)"},children:[(0,G.jsxs)(d.Z,{sx:{display:"flex",flexDirection:"column"},children:[(0,G.jsx)(x.Z,{variant:"overline",sx:{fontSize:"14px",lineHeight:"1.4",ml:"16px"},children:(null===S||void 0===S?void 0:S.taskName)||"No Task Name"}),(0,G.jsxs)(x.Z,{variant:"overline",sx:{fontSize:"12px",lineHeight:"1.2",ml:"16px"},children:[(0,G.jsx)("span",{style:{fontWeight:"bold",marginRight:"6px"},children:(null===E||void 0===E?void 0:E.userName)||"No User Name"})," (".concat(null===E||void 0===E?void 0:E.documentTypeDescription,")")]})]}),(0,G.jsx)(d.Z,{children:(0,G.jsx)(h.Z,{onClick:function(){M(-1)},sx:{fontSize:"0.69rem",height:"2.5em",margin:"2px",border:"1px solid ".concat(z.q.Button1),backgroundColor:z.q.Button1,color:z.q.Button2,"&:hover":{backgroundImage:z.q.B_hv1,backgroundColor:z.q.Button1,border:"1px solid ".concat(z.q.Button1)}},children:"Go Back"})})]}),(0,G.jsxs)(d.Z,{display:"flex",sx:{flex:1,display:"flex",overflow:"hidden"},children:[(0,G.jsxs)(d.Z,{sx:{flex:1,height:"100%",bgcolor:"white",display:"flex",flexDirection:"column",boxSizing:"border-box",overflow:"hidden"},children:[(0,G.jsx)(d.Z,{sx:{flexShrink:0},children:(0,G.jsx)(de.Z,{value:T,onChange:function(e,t){R(t)},tabs:["Approved History","Details","Tag Details"]})}),(0,G.jsx)(d.Z,{sx:{flex:1,display:"flex",flexDirection:"column",overflow:"hidden"},children:function(e){switch(e){case 0:return(0,G.jsx)(we,{taskId:K,reset:Le});case 1:return E?(0,G.jsx)(ue.Z,(0,r.Z)((0,r.Z)({},E),{},{openFile:rt})):(0,G.jsx)(G.Fragment,{});case 2:return(0,G.jsx)(ve.Z,{taskTagId:S.taskTagId,taskTableId:S.taskTableId})}}(T)})]}),(0,G.jsxs)(d.Z,{sx:{bgcolor:"white",position:"relative"},children:[(0,G.jsx)(f.Z,{direction:"left",in:Boolean(n),style:{height:"100%",overflowY:"hidden",padding:0,backgroundColor:"white"},children:(0,G.jsxs)(Te,{width:Boolean(n)?"400px":"60px",children:["actions"===n&&S&&(0,G.jsx)(G.Fragment,{children:(0,G.jsx)($,{documentStateId:S.documentStateId,taskId:+K,documentTypeId:S.documentTypeId,currentUser:Ae,userType:qe,onActionComplete:function(e,t){$e((0,r.Z)((0,r.Z)({},Qe),{},{open:!0,message:e,severity:t})),it(),Oe(!Le)},assignedApprovers:S.taskApprovers})}),"attachments"===n&&(0,G.jsx)(G.Fragment,{children:(0,G.jsx)(p.Z,{sx:{height:"100%",width:"335px",borderRadius:0},children:L.length>0?(0,G.jsx)(d.Z,{sx:{paddingLeft:0},children:(0,G.jsx)(te.Z,{attachments:L,onOpenAttachment:rt},"attachments")}):(0,G.jsx)(G.Fragment,{children:(0,G.jsxs)(d.Z,{sx:{height:"100%"},children:[(0,G.jsx)(P.Z,{title:"Attachments"},"attachment-header"),(0,G.jsxs)(d.Z,{sx:{display:"flex",alignItems:"center",mt:5,ml:2},children:[(0,G.jsx)(Ie.Z,{sx:{color:"#cfcfcf",fontSize:33,mb:1,mr:1}}),(0,G.jsx)("h5",{style:{color:"#cfcfcf",marginTop:5,marginBottom:0,fontSize:21,fontWeight:"semi bold"},children:"No attachments available"})]})]})})})}),"notes"===n&&(0,G.jsx)(d.Z,{sx:{height:"100%"},children:(0,G.jsx)(oe,{messages:ie,onSendMessage:function(e){var t={noteId:ie.length+1,noteUserId:Ae,noteComment:e,noteMentions:JSON.stringify({}),noteCreated:new Date,noteTaskId:K,noteTypeId:2};st(t)},currentUser:Ae})}),"assigned"===n&&(0,G.jsx)(je,{unAssignedUsers:We,assignedUsers:[],taskUsers:S.taskUsers,handleTaskUsers:function(e){B.h.post("update-taskusers",{body:{taskId:K,taskUsers:e}}).then(function(){var e=(0,o.Z)((0,s.Z)().mark((function e(t){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.status){e.next=3;break}return e.next=3,B.h.post("check-task-access",{body:{taskId:K,userId:q.Z.loginResponse.user[0].userId}}).then((function(e){C(e.data)}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}),"history"===n&&(0,G.jsx)(d.Z,{sx:{height:"100%"},children:(0,G.jsx)(ae,{history:Q})})]})}),(0,G.jsx)(m.ZP,{variant:"persistent",anchor:"right",open:!0,PaperProps:{style:{width:"65px",position:"absolute",top:0,right:0,height:"100%",backgroundColor:F.palette.background.paper,boxShadow:"2px 0 5px rgba(0,0,0,0.1)",borderTopRightRadius:"5px",borderBottomRightRadius:"5px"}},children:(0,G.jsxs)(g.Z,{style:{flexGrow:1},children:[(0,G.jsx)(Z.ZP,{button:!0,onClick:function(){return et("actions")},children:(0,G.jsx)(j.Z,{title:"Actions",placement:"left",children:(0,G.jsx)(v.Z,{color:"actions"===n?"primary":"action"})})}),(0,G.jsx)(Z.ZP,{button:!0,onClick:function(){return et("attachments")},children:(0,G.jsx)(j.Z,{title:"Attachments",placement:"left",children:(0,G.jsx)(y.Z,{color:"attachments"===n?"primary":"action"})})}),(0,G.jsx)(Z.ZP,{button:!0,onClick:function(){return et("notes")},children:(0,G.jsx)(j.Z,{title:"Notes",placement:"left",children:(0,G.jsx)(b.Z,{color:"notes"===n?"primary":"action"})})}),(0,G.jsx)(Z.ZP,{button:!0,onClick:function(){return et("history")},children:(0,G.jsx)(j.Z,{title:"History",placement:"left",children:(0,G.jsx)(k.Z,{color:"history"===n?"primary":"action"})})})]})})]}),(0,G.jsx)(ce.Z,{open:me,blobUrl:be,handleClose:function(){URL.revokeObjectURL(be),ke(""),ge(!1)},loading:Re},"File-Preview-Dialog"),(0,G.jsx)(le.Z,{open:Qe.open,onClose:function(){$e((0,r.Z)((0,r.Z)({},Qe),{},{open:!1}))},message:Qe.message,severity:Qe.severity})]})]})})}):(0,G.jsx)(De.Z,{})}}}]);
//# sourceMappingURL=8462.9a994238.chunk.js.map